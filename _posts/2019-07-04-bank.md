---
layout:     post
title:      Bank System
author:     "Shane"
excerpt:    ""
header-img: "img/bg-mac.jpg"
tags:
    - OOD
---

### Requiremnt
1. cross bank transfer
2. depoist
3. Withdraw

```java

Class BaseAccount {
    int userID;
    int bankID;
    long fund;

    // default CURD
}

// component, singleton
Class Partner extends BaseAccount{
    Chase chase;
}

// component, singleton
Class Chase{

    int fund;

    void addFund(PersonalAccount user, int price){
        long fee = user.changeFund(-price);
        fund += fee+price
    }

}

Interface PartnerFactory {
    Bank getBankByID(int id);
}

// app controller
Class Controller {

    PartnerFactory partnerFactory;
    Chase chase;

    void depoist(PersonalAccount user, int price) throws Exception{
        user.deposit(price);
    }

    void withdraw(PersonalAccount user, int price) throws Exception{
        user.withdraw(price);
    }

    void crossBankTransfer(PersonalAccount fromUser, OtherBankPersonalAccount toUser, int price) throws Exception {
        Bank toBank = partnerFactory.getBankByID(toUser.getBankID());
        toBank.notifyAdd(toUser, fromUser, price);
        chase.addFund(fromUser, price);
    }
}
```